<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="pers.yang.mapper.MemberMapper">
    <!--==============================insert=========================================-->
    <insert id="registeMember" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        insert into t_member values (null, #{fileNumber}, #{name}, #{sex}, #{idCard}, #{phoneNumber}, #{regTime}, #{password}, #{email}, #{birthday}, #{remark})
    </insert>



    <!--==============================select=========================================-->
    <!--通过手机号码查询用户-->
    <select id="findMemberByTelephone" resultType="Member">
        select * from t_member where phoneNumber = #{telephone}
    </select>

    <!--<select id="findCountByDate" resultType="Integer">-->
        <!--select count(id) from t_member where regTime BETWEEN #{beginDate} and #{endDate}-->
    <!--</select>-->
    <select id="findCountByDate" resultType="pers.yang.entity.MemberReportBean">
        select date_format(regTime, '%Y-%m') month, count(id) monthCount from t_member where regTime BETWEEN #{beginDate} and #{endDate} group by month
    </select>

    <!--查询指定日期新增会员数-->
    <select id="findTodayNewMemberCount" resultType="Long">
        select count(id) from t_member where regTime = #{date}
    </select>

    <!--查询总会员数-->
    <select id="findTotalMemberCount" resultType="Long">
        select count(id) from t_member
    </select>

    <!--查询指定日期后新增会员数-->
    <select id="findNewMemberCountAfterDate" resultType="Long">
        select count(id) from t_member where regTime >= #{date}
    </select>
</mapper>